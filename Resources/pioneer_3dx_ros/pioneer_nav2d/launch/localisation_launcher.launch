<?xml version="1.0"?>
<launch>
  <arg name="robot_name"/>
  <arg name="robot_pose_x" default="0"/>
  <arg name="robot_pose_y" default="0"/>
  <arg name="robot_pose_yaw" default="0"/>
	<arg name="localization_type" default="amcl" doc="opt: amcl, fake_localization" />

  <!-- Run AMCL (noisy localisation)-->
  <group ns="$(arg robot_name)">

		<group if="$(eval localization_type == 'amcl')">
      <node pkg="amcl" type="amcl" name="amcl" output="screen">
    		<rosparam file="$(find pioneer_nav2d)/param/amcl.yaml" command="load"/>
				<param name="initial_pose_x" value="$(arg robot_pose_x)" />
   		  <param name="initial_pose_y" value="$(arg robot_pose_y)" />
    		<param name="initial_pose_a" value="$(arg robot_pose_yaw)" />
    		<param name="base_frame_id" value="$(arg robot_name)/base_link"/> 
    		<param name="odom_frame_id" value="$(arg robot_name)/odom"/> 
    		<remap from="map" to="/map" />
  		</node>
    </group>

    <group if="$(eval localization_type == 'fake_localization')">
   		<node pkg="fake_localization" type="fake_localization" name="fake_localization" output="screen">
				<param name="base_frame_id" value="$(arg robot_name)/base_link"/>
				<param name="odom_frame_id" value="$(arg robot_name)/odom"/>
				<remap from="base_pose_ground_truth" to="odom"/> <!-- results robot_name/odom!! / -->
				<!-- global_frame_id has the default value "/map"-->
			</node>
		</group>

  </group>

</launch>
